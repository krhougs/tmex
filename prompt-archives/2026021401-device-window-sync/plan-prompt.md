# Prompt Archive

## 用户原始需求

前端设备列表需要修复：

1. 外部切换窗口后前端不会自动切换到对应窗口
2. 在浏览器中手动切换窗口不工作（大概率是自动选择 pane 有问题）
3. 新建窗口后没有自动切换去新的窗口
4. 终端页刷新会自动跳转到默认页面

请系统性分析代码查找问题，必要时可以修改 gateway。

## 用户补充

- 跟随策略：需要判断当前终端是否同一设备（外部设备 == 当前设备时才跳转）。
- 列表状态：需要区分 tmux 中当前窗口（白色小点）和网页终端当前窗口（高亮选择）两种状态。

## 实现前确认（本轮已确认）

- 当 tmux 的 active window/pane 在外部发生变化时，网页在同一 `deviceId` 内“始终自动跟随”。
- 自动跳转使用 `navigate(..., { replace: true })`，避免污染浏览器历史。

## 用户执行指令

存档 plan。
