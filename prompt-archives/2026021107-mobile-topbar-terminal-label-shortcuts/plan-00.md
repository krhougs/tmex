# Plan 00：移动端单行固定顶栏 + 终端字符串改版 + 编辑器快捷键

时间：2026-02-11

## 背景

当前前端已完成一轮顶栏与按钮改造，但与最新需求仍有偏差：
1. 移动端顶栏尚未固定为“单行唯一头部”。
2. 终端字符串格式仍使用旧模板。
3. 编辑器未提供常用控制快捷键直发。

## 目标

1. 移动端顶栏固定在顶部且只有一行，内容为：侧边栏按钮 + 当前终端字符串 + 操作按钮。
2. 浏览器标题、PC 顶栏、手机顶栏统一使用：`${windowIdx}/${paneIdx}: ${paneTitle}@{deviceName}`。
3. 编辑器新增快捷键行：`CTRL+C`、`ESC`、`CTRL+D`、`SHIFT+ENTER`，点击即发送控制字符。

## 关键决策

1. `windowIdx` 使用 `selectedWindow.index`，路由 `windowId` 仅用于定位。
2. `paneTitle` 使用 `pane.title ?? window.name`。
3. 移动端右侧操作按钮为两个 icon-only 按钮：编辑器切换、跳转到最新。
4. 快捷键无需确认，直接发送。

## 实施任务

1. 更新终端字符串构造工具（`apps/fe/src/utils/terminalMeta.ts`）。
2. 扩展共享类型与网关快照，增加 `pane.title` 数据源。
3. 重构 `RootLayout` 移动端顶栏为固定单行，并接入移动端操作按钮。
4. 调整 `DevicePage`：移动端不再渲染第二行头部，PC 顶栏与浏览器标题使用新格式。
5. 在编辑器区增加快捷键按钮行并接入控制字符发送。
6. 更新受影响 e2e 断言并执行定向验证。

## 验收标准

1. 移动端只有一行固定顶栏，不出现双顶栏。
2. 三处终端字符串格式一致，变量语义为 `windowIdx`。
3. 快捷键按钮可见、可点击、可发送控制字符。
4. 前端构建通过，关键定向 e2e 通过。
